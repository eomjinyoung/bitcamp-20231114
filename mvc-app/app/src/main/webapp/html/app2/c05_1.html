<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>c05_1</title>
</head>
<body>

<h1>JSON 데이터 받기</h1>
<button id="btn1" type="button">JSP에서 JSON 생성</button><br>
<button id="btn2" type="button">페이지 컨트롤러에서 Gson을 이용하여 JSON 생성</button><br>
<button id="btn3" type="button">프론트 컨트롤러가 Jackson 또는 Gson을 이용하여 JSON 생성</button><br>

<script>
document.querySelector("#btn1").onclick = () => {
  var xhr = new XMLHttpRequest();
  xhr.onreadystatechange = () => {
    if (xhr.readyState != 4 || xhr.status != 200)
      return;
    //console.log(xhr.responseText);
    displayData(xhr.responseText);
  };
  xhr.open("GET", "../../app2/c05_1/h1", true);
  xhr.send();
};

document.querySelector("#btn2").onclick = () => {
  var xhr = new XMLHttpRequest();
  xhr.onreadystatechange = () => {
    if (xhr.readyState != 4 || xhr.status != 200)
      return;
    //console.log(xhr.responseText);
    displayData(xhr.responseText);
  };
  xhr.open("GET", "../../app2/c05_1/h2", true);
  xhr.send();
};

document.querySelector("#btn3").onclick = () => {
  var xhr = new XMLHttpRequest();
  xhr.onreadystatechange = () => {
    if (xhr.readyState != 4 || xhr.status != 200)
      return;
    //console.log(xhr.responseText);
    displayData(xhr.responseText);
  };
  xhr.open("GET", "../../app2/c05_1/h3", true);
  xhr.send();
};

function displayData(jsonStr) {
  var arr = JSON.parse(jsonStr);
  for (var i = 0; i < arr.length; i++) {
    console.log(
            arr[i].no, 
            arr[i].title, 
            arr[i].writer, 
            arr[i].viewCount, 
            arr[i].createdDate);
  }
}
</script>

</body>
</html>


